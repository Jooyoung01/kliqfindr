
      SUBROUTINE MDSCMD(EXTNOTE,EXT,MID,TITLES,LMAXDEPT,INFILE,
     C LGROUP,COVMAT)
      INCLUDE 'PARAM.H'
      CHARACTER EXTNOTE*11,EXT*5,TITLES(3)*20,INFILE*16,MID*1,
     C OUTFILE*12,DATFILE*11
      INTEGER LMAXDEPT,G1,LGROUP(MAXKLIQ),U
      REAL COVMAT(MAXGR,MAXGR)
      OUTFILE='MDS'//MID//'READ.CMD'
      OPEN(59,FILE=OUTFILE)
      DATFILE='group.'//EXT
      OPEN(53,FILE=DATFILE)
   
      WRITE(59,4301) 'NOTE ''',EXTNOTE,' ',
     C TITLES(1),TITLES(2),TITLES(3),
     C ' ',INFILE,
     C ''''
      WRITE(59,4301) 'SAVE MDSD' 
      WRITE(59,4301) 'GET '',DATFILE,'''
      WRITE(59,4301) 'LRECL=2000'
      WRITE(59,4301) 'DIAGONAL=ABSENT'
      WRITE(59,4302) 'input (V001,'
      DO 3235 G1=2,LMAXDEPT
      WRITE(59,4303) G1
       WRITE(53,103) (COVMAT(LGROUP(G1),LGROUP(U)) ,
     C  U=1,G1-1)
03235  CONTINUE
      CLOSE(53)
C      WRITE(59,4301) '),'
      WRITE(59,4304) LMAXDEPT
      WRITE(59,4301) 'TYPE=SIMILARITY'
      WRITE(59,4301) 'RUN'
      CLOSE(59)
      RETURN
04301 FORMAT(20(A))
04302 FORMAT(20(A$))
04303 FORMAT('V',I3.3,',')
04304 FORMAT(') (',I3,'*#7)')
  103 FORMAT(251(F7.3))
      END 
